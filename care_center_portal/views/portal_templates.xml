<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <template id="portal_layout" inherit_id="portal.portal_layout" primary="True">

        <xpath expr="//t[@t-call='portal.portal_breadcrumbs']" position="attributes">
            <attribute name="t-call">care_center_portal.portal_breadcrumbs_create</attribute>
        </xpath>

    </template>

    <template id="portal_layout_save_discard" inherit_id="portal.portal_layout" primary="True">

        <xpath expr="//t[@t-call='portal.portal_breadcrumbs']" position="attributes">
            <attribute name="t-call">care_center_portal.portal_breadcrumbs_save_discard</attribute>
        </xpath>

    </template>

    <template id="portal_layout_edit_create" inherit_id="portal.portal_layout" primary="True">

        <xpath expr="//t[@t-call='portal.portal_breadcrumbs']" position="attributes">
            <attribute name="t-call">care_center_portal.portal_breadcrumbs_edit_create</attribute>
        </xpath>

    </template>

    <template id="portal_breadcrumbs_create" inherit_id="portal.portal_breadcrumbs" primary="True">

        <ol position="replace">
            <div class="nav flex-column">
                <t>$0</t>
                <a t-attf-href="{{ default_url }}/create" t-att-class="'btn btn-primary btn-inline-block mb-2 py-1 px-1 ' + margin_bottom"
                   role="button" style="width: 5em">
                    <i class="fa fa-plus"></i>
                    Create
                </a>
            </div>
        </ol>

    </template>

    <template id="portal_breadcrumbs_save_discard" inherit_id="portal.portal_breadcrumbs" primary="True">
        <ol position="after">
            <button type="submit" class="btn btn-primary btn-inline-block ml-2 mb-2 py-1 px-2" onclick="document.forms[document.forms.length - 1].submit();">
                <i class="fa fa-check"></i>
                Save
            </button>
            <button type="reset" class="btn btn-light btn-inline-block mb-2 py-1 px-2 border" onclick="window.history.back();">
                <i class="fa fa-times"></i>
                Discard
            </button>
        </ol>
    </template>

    <template id="portal_breadcrumbs_edit_create" inherit_id="portal.portal_breadcrumbs" primary="True">
        <ol position="after">
            <t t-if="not edit_url">
                <t t-set="edit_url" t-value="record.get_portal_url().split('?')[0] + '/edit?' + record.get_portal_url().split('?')[1]"/>
            </t>
            <a t-att-href="edit_url" class="btn btn-primary btn-inline-block ml-2 mb-2 py-1 px-2" role="button">
                <i class="fa fa-pencil"></i>
                Edit
            </a>
            <a t-att-href="create_url" class="btn btn-light btn-inline-block mb-2 py-1 px-2 border" role="button">
                <i class="fa fa-plus"></i>
                Create
            </a>
        </ol>
    </template>

    <template id="portal_searchbar" inherit_id="portal.portal_searchbar"  name="Compass Portal Search Bar" primary="True">

        <xpath expr="//t[@t-call='portal.portal_breadcrumbs']" position="attributes">
            <attribute name="t-call">care_center_portal.portal_breadcrumbs_create</attribute>
        </xpath>

        <nav position="attributes">
            <attribute name="t-attf-class" add="d-flex align-items-start px-2" separator=" "/>
        </nav>

    </template>

</odoo>